import{j as t}from"./jsx-runtime-BC85tlZo.js";import{R as N,r as h}from"./iframe-BTuJcAs9.js";import{B as L}from"./BasicLayout-BZRsvyjz.js";import{C as r}from"./Card-CztHanru.js";import{C as m}from"./Container-DxFu-v-g.js";import{R as d}from"./Row-B6OaNaDg.js";import{C as a}from"./Col-C_aqFeIP.js";import{B as I}from"./Button-BDV_ecRq.js";import{a as B,u as v}from"./useBackend-CbiZWCPX.js";import{u as D}from"./currentUser-Beivyx2b.js";import{a as P}from"./commonsUtils-BXVpWSbP.js";import{g as S}from"./HomePageBackground-aMBgdxEr.js";/* empty css                 */import{u as F}from"./index-BB7RSFYR.js";const x=new Date;function J(e){const n=parseInt(e),s=parseInt(e.substring(5,7)),o=parseInt(e.substring(8,10)),i=x.getFullYear(),c=x.getMonth()+1,l=x.getDate();return n===i?s===c?o>l:s>c:n>i}const j=({buttonText:e,buttonLink:n,commons:s})=>{const o="commonsCard";return t.jsx(r.Body,{className:"woodenboardtable",children:t.jsx(m,{children:t.jsxs(d,{children:[t.jsx(a,{sx:4,"data-testid":`${o}-id-${s.id}`,children:s.id}),t.jsx(a,{sx:4,"data-testid":`${o}-name-${s.id}`,children:s.name}),e!=null&&t.jsx(a,{sm:4,children:t.jsx(I,{"data-testid":`${o}-button-${e}-${s.id}`,size:"sm",className:"buttonchange",onClick:()=>{e==="Join"&&J(s.startingDate)?alert(`This commons has not started yet and cannot be joined.
The starting date is `+parseInt(s.startingDate.substring(5,7))+"/"+parseInt(s.startingDate.substring(8,10))+"/"+parseInt(s.startingDate)):n(s.id)},children:e})})]})})})};j.__docgenInfo={description:"",methods:[],displayName:"CommonsCard"};const g=e=>{const n=e.title?.includes("Join")?"join":"visit";return t.jsxs(r,{style:{opacity:"1",backgroundColor:"rgb(147,98,66)",color:"rgb(245, 210, 140)",border:"6px solid rgb(99,71,52)"},className:"my-3",children:[t.jsx(r.Title,{"data-testid":"commonsList-title",style:{fontFamily:"Rye",fontSize:"35px",backgroundColor:"rgb(147,98,66)",color:"rgb(245, 210, 140)"},className:"text-center my-3",children:e.title}),e.commonList.length>0?t.jsxs(N.Fragment,{children:[t.jsx(r.Subtitle,{children:t.jsx(m,{children:t.jsxs(d,{children:[t.jsx(a,{"data-testid":"commonsList-subtitle-id",sx:4,style:{fontFamily:"Sancreek",paddingBottom:"10px"},children:"ID#"}),t.jsx(a,{"data-testid":"commonsList-subtitle-name",sx:4,style:{fontFamily:"Sancreek",paddingBottom:"10px"},children:"Common's Name"}),t.jsx(a,{sm:4})]})})}),e.commonList.map(s=>t.jsx(j,{commons:s,buttonText:e.buttonText,buttonLink:e.buttonLink},s.id))]}):t.jsx(r.Subtitle,{children:t.jsx(m,{children:t.jsxs(d,{style:{justifyContent:"center",fontFamily:"Sancreek",paddingBottom:"10px"},"data-testid":"commonsList-default-message",children:["There are currently no commons to ",n]})})})]})};g.__docgenInfo={description:"",methods:[],displayName:"CommonsList"};function T({hour:e=null}){const[n,s]=h.useState([]),{data:o}=D(),{data:i}=B(["/api/commons/all"],{url:"/api/commons/all"},[]),l=v(u=>({url:"/api/commons/join",method:"POST",params:{commonsId:u}}),{},["/api/currentUser"]);h.useEffect(()=>{o?.root?.user?.commons&&s(o.root.user.commons)},[o]);const p=o?.root?.user?.givenName||"",f=e===null?new Date().getHours():e,b=S(f);let y=F();const C=u=>{y("/play/"+u)},k=P(i,n);return t.jsx("div",{"data-testid":"HomePage-main-div",style:{backgroundSize:"cover",backgroundImage:`url(${b})`},children:t.jsxs(L,{children:[t.jsx(r,{"data-testid":"HomePage-intro-card",className:"woodentitle",children:t.jsx("div",{className:"text-center border-0 my-3",children:t.jsxs("h1",{"data-testid":"homePage-title",className:"animate-charcter",children:["Howdy Farmer ",p]})})}),t.jsx(m,{children:t.jsxs(d,{children:[t.jsx(a,{sm:!0,children:t.jsx(g,{commonList:k,title:"Join A New Commons",buttonText:"Join",buttonLink:l.mutate})}),t.jsx(a,{sm:!0,children:t.jsx(g,{commonList:n,title:"Visit A Commons",buttonText:"Visit",buttonLink:C})})]})})]})})}T.__docgenInfo={description:"",methods:[],displayName:"HomePage",props:{hour:{defaultValue:{value:"null",computed:!1},required:!1}}};export{T as H};
